{% extends 'GestionDePracticas/practicas.html' %}
{% load static %}

{% block titulo %}
Detalles de {{ tipo }}
{% endblock %}

{% block practica-titulo %}
Detalles de {{ tipo }}
{% endblock %}

{% block practica-contenido %}

    <div class="practica-cuerpo">


        <form class="form-horizontal formulario" action="{{ formAction }}" method="POST" onsubmit="validar(event);">

            {% csrf_token %}

            {% include "./formsetSnippet.html" with formset=formsetServicios label="Servicios realizados" %}
            {% include "./formsetSnippet.html" with formset=formsetProductos label="Productos utilizados" %}

            <div class="col-sm-12 acciones">
                <button type="submit" class="btn btn-sm btn-default center-block">
                    Guardar
                </button>
            </div>

        </form>
    </div>

<div id="empty-form-{{ formsetServicios.prefix }}" class="hidden" >
    {% include "./formsetFormSnippet.html" with prefix=formsetServicios.prefix  form=formsetServicios.empty_form %}
</div>
<div id="empty-form-{{ formsetProductos.prefix }}" class="hidden" >
    {% include "./formsetFormSnippet.html" with prefix=formsetProductos.prefix form=formsetProductos.empty_form %}
</div>
{% endblock %}

{% block paginaJavascript %}
    {{ block.super }}
    <script src="{% static 'GestionDePracticas/js/practicas.js' %}"></script>
    <script type="text/javascript">
        var validadores = [
            {
                "validador" : validarFormset,
                "argumentos" : {
                    "reemplazador" : reemplazarServicios,
                    "comparador" : compararServicios,
                    "formset_id" : "div-{{ formsetServicios.prefix }}",
                    "error" : "duplicados"
                }
            },
            {
                "validador" : validarFormset,
                "argumentos" : {
                    "reemplazador" : reemplazarProductos,
                    "comparador" : compararProductos,
                    "formset_id" : "div-{{ formsetProductos.prefix }}",
                    "error" : "duplicados"
                }
            }
        ]
    </script>
{% endblock %}